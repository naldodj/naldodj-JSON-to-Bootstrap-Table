!function(e,t){"function"==typeof define&&define.amd?define(["createTable"],t):e.createTable=t(e.createTable)}(this,function(){function e(t){if(window===this)return new e(t);this.tableName="",this.keys=[],this.globalConfig={url:"",data:"",wrapper:"",search:!0,tableClass:"table table-bordered table-hover"};for(var a in this.globalConfig)t.hasOwnProperty(a)&&(this.globalConfig[a]=t[a]);if(this.globalConfig.search&&(this.searchWrapper=document.createElement("div"),this.searchWrapper.className="searchBox col-md-4 col-lg-6 col-md-offset-6",document.querySelector(this.globalConfig.wrapper).appendChild(this.searchWrapper)),this.globalConfig.wrapper){var l=document.createElement("table");l.className=this.globalConfig.tableClass,document.querySelector(this.globalConfig.wrapper).appendChild(l),this.tableName=l}else{var n=document.createElement("div"),l=document.createElement("table");n.className="jsonTable",l.className=this.globalConfig.tableClass,n.appendChild(l),document.body.appendChild(n),this.tableName=l}}function t(e){var t=document.createElement("tbody"),a=e.length;document.createElement("thead");if(e.length>=1){for(var l=this.keys.length,n=0;a>n;n++){for(var r=document.createElement("tr"),i=0;l>i;i++){var o=document.createElement("td");o.className=this.keys[i],o.innerHTML=e[n][this.keys[i]],r.appendChild(o)}t.appendChild(r)}var s=this.tableName.querySelector("tbody");s&&this.tableName.removeChild(s),this.tableName.appendChild(t)}else{var r=document.createElement("tr"),o=document.createElement("td");o.innerHTML="No matching data found",r.appendChild(o),t.appendChild(r);var s=this.tableName.querySelector("tbody");s&&this.tableName.removeChild(s),this.tableName.appendChild(t)}}e.prototype.create=function(){if(this.globalConfig.url){var e,t=this.globalConfig.url,n=new XMLHttpRequest,r=this.globalConfig.search;console.log(t);var i=this;n.open("GET",t),n.send(),n.onreadystatechange=function(){if(4!=n.readyState||200!=n.status)throw"Error getting the data. Please check the url";if(e=JSON.parse(n.responseText),console.log(e),0==e.Length)throw"got an empty Object";sessionStorage.tabledata=n.responseText,r&&l.call(i),a.call(i,e)}}else{if(!this.globalConfig.data||!Array.isArray(this.globalConfig.data))throw"Wrong data passed. Please check the data back";sessionStorage.tabledata=JSON.stringify(this.globalConfig.data),this.globalConfig.search&&l.call(this),a.call(this,this.globalConfig.data)}};var a=function(e){var t=document.createElement("tbody"),a=e.length,l=document.createElement("thead");for(var n in e[0]){console.log(n);var r=document.createElement("th");this.keys.push(n),r.innerHTML=n,l.appendChild(r)}for(var i=this.keys.length,o=0;a>o;o++){for(var s=document.createElement("tr"),h=0;i>h;h++){var d=document.createElement("td");d.className=this.keys[h],d.innerHTML=e[o][this.keys[h]],s.appendChild(d)}t.appendChild(s)}this.tableName.appendChild(l),this.tableName.appendChild(t)},l=function(){var e=document.createElement("input");e.type="text",e.className="form-control",e.placeholder="Search",e.addEventListener("keydown",this.filter.bind(this,e),!1),e.addEventListener("keyup",this.filter.bind(this,e),!1),this.searchWrapper.appendChild(e)};return e.prototype.filter=function(e){var a=e.value.toLowerCase();if(sessionStorage.tabledata){for(var l=JSON.parse(sessionStorage.tabledata),n=[],r=this.keys.length,i=l.length,o=0;i>o;o++)for(var s=0;r>s;s++)if(l[o][this.keys[s]].toString().toLowerCase().match(a)){n.push(l[o]);break}t.call(this,n)}},e});